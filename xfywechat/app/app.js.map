{"version":3,"sources":["../src/app.js"],"names":["koa","bindRouters","log4js","require","use","koaLogger","getLogger","level","one","next","console","log","__dirname","wechat","reply","routes","allowedMethods","mongoose","Promise","global","content","connect","useMongoClient","listen","process","env","PORT"],"mappings":"AAAA;;;AAGA;;;;;;AAEA;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;AACA;;;;AAGA;;;;;;AALA,IAAMA,MAAM,mBAAZ;;AAGA,sBAAYC,WAAZ;;AAGA,IAAMC,SAASC,QAAQ,UAAR,CAAf;AACAH,IAAII,GAAJ,CAAQF,OAAOG,SAAP,CAAiBH,OAAOI,SAAP,CAAiB,MAAjB,CAAjB,EAA2C,EAAEC,OAAO,MAAT,EAA3C,CAAR;AACA,IAAMC,iCAAM,SAANA,GAAM,CAAWC,IAAX;AAAA;AAAA;AAAA;AAAA;;AAEVC,kBAAQC,GAAR,CAAY,QAAZ;AAFU;AAAA,iBAGJF,IAHI;;AAAA;AAIVC,kBAAQC,GAAR,CAAY,4BAAZ;AACAD,kBAAQC,GAAR,CAAY,IAAZ;;AALU;AAAA;AAAA;AAAA;AAAA;AAAA,KAANH,GAAM;AAAA,CAAN,CAAN;;AAQAR,IAAII,GAAJ,CAAQI,GAAR;AACAR,IAAII,GAAJ,CAAQ,yBAAMQ,YAAY,OAAlB,CAAR;;AAEAZ,IAAII,GAAJ,CAAQ,iBAAO,iBAAOS,MAAd,EAAqB,iBAAOC,KAA5B,CAAR;AACAd,IAAII,GAAJ,CAAQ,kBAAUW,MAAV,EAAR;AACAf,IAAII,GAAJ,CAAQ,kBAAUY,cAAV,EAAR;AACA,IAAIC,WAAWd,QAAQ,UAAR,CAAf;AACAc,SAASC,OAAT,GAAmBC,OAAOD,OAA1B;;AAEC,IAAIE,UAAU,yBAAd;;AAEDH,SAASI,OAAT,CAAiB,0DAAjB,EAA6E;AAC3E;AACEC,kBAAgB;AAChB;AAHyE,CAA7E;AAKE;AACA;AACA;AACA;AACA;;AAEF;AACA;AACAtB,IAAIuB,MAAJ,CAAWC,QAAQC,GAAR,CAAYC,IAAZ,IAAkB,IAA7B;AACAhB,QAAQC,GAAR,CAAY,gBAAca,QAAQC,GAAR,CAAYC,IAAZ,IAAmB,IAAjC,CAAZ","file":"app.js","sourcesContent":["/**\r\n * Created by yao on 2016/10/23.\r\n */\r\n\"use strict\";\r\n\r\nimport {routePrefix, route, koaRouter} from './router'\r\nimport Koa from \"koa\";\r\nimport wechat from \"./wechat/g\";\r\nimport config from './config';\r\nimport weixin from './weixin';\r\nimport serve from 'koa-static';\r\nconst koa = new Koa();\r\nimport  './job';\r\nimport controllers from './controllers';\r\ncontrollers.bindRouters();\r\n\r\nimport context from './common/context';\r\nconst log4js = require('koa-log4')\r\nkoa.use(log4js.koaLogger(log4js.getLogger(\"http\"), { level: 'auto' }))\r\nconst one = function *(next) {\r\n \r\n  console.log('>> one');\r\n  yield next;\r\n  console.log(\"----------one-------------\")\r\n  console.log(this);\r\n}\r\n\r\nkoa.use(one);\r\nkoa.use(serve(__dirname + '/view'));\r\n\r\nkoa.use(wechat(config.wechat,weixin.reply));\r\nkoa.use(koaRouter.routes());\r\nkoa.use(koaRouter.allowedMethods());\r\nlet mongoose = require('mongoose');\r\nmongoose.Promise = global.Promise;\r\n\r\n var content = 'mongodb://localhost/yao'\r\n\r\nmongoose.connect('mongodb://yao:YaoPwd127899YCC@crm.liangcanl.cn:59832/yao', {\r\n  //mongoose.connect('mongodb://localhost/yao', {\r\n    useMongoClient: true,\r\n    /* other options */\r\n  });\t\r\n  // mongoose.connect(content, {\r\n  //   //mongoose.connect('mongodb://localhost/yao', {\r\n  //     useMongoClient: true,\r\n  //     /* other options */\r\n  //   });\t\r\n\r\n//import \"./test\"\r\n//console.log(process.env);\r\nkoa.listen(process.env.PORT||8090);\r\nconsole.log('Listening:'+(process.env.PORT ||8090));\r\n\r\n\r\n"]}