{"version":3,"sources":["../src/app.js"],"names":["koa","bindRouters","log4js","require","use","koaLogger","getLogger","level","one","next","console","log","__dirname","wechat","reply","routes","allowedMethods","mongoose","Promise","global","content","connect","useMongoClient","server","auto_reconnect","poolSize","listen","process","env","PORT"],"mappings":"AAAA;;;AAGA;;;;;;AAEA;;AAKA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;AACA;;;;AAGA;;;;;;AALA,IAAMA,MAAM,mBAAZ;;AAGA,sBAAYC,WAAZ;;AAGA,IAAMC,SAASC,QAAQ,UAAR,CAAf;AACAH,IAAII,GAAJ,CAAQF,OAAOG,SAAP,CAAiBH,OAAOI,SAAP,CAAiB,MAAjB,CAAjB,EAA2C;AAClDC,QAAO;AAD2C,CAA3C,CAAR;AAGA,IAAMC,8CAAM,SAANA,GAAM,CAAUC,IAAV;AAAA;AAAA;AAAA;AAAA;;AAEXC,aAAQC,GAAR,CAAY,QAAZ;AAFW;AAAA,YAGLF,IAHK;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAND,GAAM;AAAA,CAAN,CAAN;;AAMAR,IAAII,GAAJ,CAAQI,GAAR;AACAR,IAAII,GAAJ,CAAQ,yBAAMQ,YAAY,OAAlB,CAAR;;AAEAZ,IAAII,GAAJ,CAAQ,iBAAO,iBAAOS,MAAd,EAAsB,iBAAOC,KAA7B,CAAR;AACAd,IAAII,GAAJ,CAAQ,kBAAUW,MAAV,EAAR;AACAf,IAAII,GAAJ,CAAQ,kBAAUY,cAAV,EAAR;AACA,IAAIC,WAAWd,QAAQ,UAAR,CAAf;AACAc,SAASC,OAAT,GAAmBC,OAAOD,OAA1B;;AAEA,IAAIE,UAAU,yBAAd;;AAEAH,SAASI,OAAT,CAAiB,0DAAjB,EAA6E;AAC5E;AACAC,iBAAgB,IAF4D;AAG5E;AACAC,SAAQ;AACPC,kBAAgB,IADT;AAEPC,YAAU;AAFH;AAJoE,CAA7E;;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACAzB,IAAI0B,MAAJ,CAAWC,QAAQC,GAAR,CAAYC,IAAZ,IAAoB,IAA/B;AACAnB,QAAQC,GAAR,CAAY,gBAAgBgB,QAAQC,GAAR,CAAYC,IAAZ,IAAoB,IAApC,CAAZ","file":"app.js","sourcesContent":["/**\n * Created by yao on 2016/10/23.\n */\n\"use strict\";\n\nimport {\n\troutePrefix,\n\troute,\n\tkoaRouter\n} from './router'\nimport Koa from \"koa\";\nimport wechat from \"./wechat/g\";\nimport config from './config';\nimport weixin from './weixin';\nimport serve from 'koa-static';\nconst koa = new Koa();\nimport './job';\nimport controllers from './controllers';\ncontrollers.bindRouters();\n\nimport context from './common/context';\nconst log4js = require('koa-log4')\nkoa.use(log4js.koaLogger(log4js.getLogger(\"http\"), {\n\tlevel: 'auto'\n}))\nconst one = function*(next) {\n\n\tconsole.log('>> one');\n\tyield next;\n}\n\nkoa.use(one);\nkoa.use(serve(__dirname + '/view'));\n\nkoa.use(wechat(config.wechat, weixin.reply));\nkoa.use(koaRouter.routes());\nkoa.use(koaRouter.allowedMethods());\nlet mongoose = require('mongoose');\nmongoose.Promise = global.Promise;\n\nvar content = 'mongodb://localhost/yao'\n\nmongoose.connect('mongodb://yao:YaoPwd127899YCC@crm.liangcanl.cn:59832/yao', {\n\t//mongoose.connect('mongodb://localhost/yao', {\n\tuseMongoClient: true,\n\t/* other options */\n\tserver: {\n\t\tauto_reconnect: true,\n\t\tpoolSize: 10\n\t}\n});\n\n// mongoose.connect('mongodb://localhost/yao', {\n//     useMongoClient: true,\n// \t/* other options */\n// \tserver: {\n// \t\t\t\tauto_reconnect: true,\n// \t\t\t\tpoolSize: 10\n// \t\t\t}\n// });\t\n\n//import \"./test\"\n//console.log(process.env);\nkoa.listen(process.env.PORT || 8090);\nconsole.log('Listening:' + (process.env.PORT || 8090));\n"]}